<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WoW DPS Spin-the-Wheel</title>
<style>
    body {
        background-color: #0d0d14;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
    }
    h1 {
        font-size: 2em;
        margin-bottom: 20px;
    }
    .wheel-container {
        display: flex;
        justify-content: center;
        gap: 40px;
        margin-bottom: 20px;
        position: relative;
    }
    canvas {
        background: transparent;
        border-radius: 50%;
    }
    .arrow {
        width: 0;
        height: 0;
        border-left: 15px solid transparent;
        border-right: 15px solid transparent;
        border-bottom: 20px solid white;
        position: absolute;
        top: -25px;
        left: 50%;
        transform: translateX(-50%);
    }
    .button-group {
        margin: 20px 0;
    }
    button {
        background-color: #007bff;
        border: none;
        color: white;
        padding: 10px 20px;
        margin: 0 5px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
    }
    button:hover {
        background-color: #0056b3;
    }
</style>
</head>
<body>
<h1>WoW DPS Spin-the-Wheel</h1>
<div class="wheel-container">
    <div>
        <div class="arrow"></div>
        <canvas id="wheel1" width="200" height="200"></canvas>
    </div>
    <div>
        <div class="arrow"></div>
        <canvas id="wheel2" width="200" height="200"></canvas>
    </div>
    <div>
        <div class="arrow"></div>
        <canvas id="wheel3" width="200" height="200"></canvas>
    </div>
</div>
<div class="button-group">
    <button onclick="spinWheel(1)">Spin #1: DPS Type</button>
    <button onclick="spinWheel(2)">Spin #2: Class</button>
    <button onclick="spinWheel(3)">Spin #3: Spec</button>
</div>
<p id="result1"></p>
<p id="result2"></p>
<p id="result3"></p>

<script>
const dpsTypes = ["Melee DPS", "Ranged DPS", "Caster DPS"];
const classes = [
    { name: "Warrior", color: "#C79C6E", specs: ["Arms", "Fury"] },
    { name: "Paladin", color: "#F58CBA", specs: ["Retribution"] },
    { name: "Hunter", color: "#ABD473", specs: ["Beast Mastery", "Marksmanship", "Survival"] },
    { name: "Rogue", color: "#FFF569", specs: ["Assassination", "Outlaw", "Subtlety"] },
    { name: "Priest", color: "#FFFFFF", specs: ["Shadow"] },
    { name: "Death Knight", color: "#C41E3A", specs: ["Frost", "Unholy"] },
    { name: "Shaman", color: "#0070DE", specs: ["Elemental", "Enhancement"] },
    { name: "Mage", color: "#69CCF0", specs: ["Arcane", "Fire", "Frost"] },
    { name: "Warlock", color: "#9482C9", specs: ["Affliction", "Demonology", "Destruction"] },
    { name: "Monk", color: "#00FF96", specs: ["Windwalker"] },
    { name: "Druid", color: "#FF7D0A", specs: ["Balance", "Feral"] },
    { name: "Demon Hunter", color: "#A330C9", specs: ["Havoc"] },
    { name: "Evoker", color: "#33937F", specs: ["Devastation"] }
];

let selectedDps = null;
let selectedClass = null;

function drawWheel(canvasId, segments, colors) {
    const canvas = document.getElementById(canvasId);
    const ctx = canvas.getContext('2d');
    const radius = canvas.width / 2;
    const angle = 2 * Math.PI / segments.length;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    segments.forEach((seg, i) => {
        ctx.beginPath();
        ctx.moveTo(radius, radius);
        ctx.fillStyle = colors ? colors[i] : "#FF5733";
        ctx.arc(radius, radius, radius, i * angle, (i + 1) * angle);
        ctx.fill();
        ctx.save();
        ctx.translate(radius, radius);
        ctx.rotate(i * angle + angle / 2);
        ctx.fillStyle = "white";
        ctx.font = "bold 14px Arial";
        ctx.textAlign = "right";
        ctx.fillText(seg, radius - 10, 5);
        ctx.restore();
    });
}

function spinWheel(wheelNumber) {
    const canvas = document.getElementById(`wheel${wheelNumber}`);
    const ctx = canvas.getContext('2d');
    const radius = canvas.width / 2;
    let segments, colors;

    if (wheelNumber === 1) {
        segments = dpsTypes;
        colors = ["#FF5733", "#FF8D33", "#FFBD33"];
    } else if (wheelNumber === 2) {
        segments = classes.map(c => c.name);
        colors = classes.map(c => c.color);
    } else if (wheelNumber === 3) {
        const classObj = classes.find(c => c.name === selectedClass);
        if (!classObj) {
            alert("Please spin for Class first!");
            return;
        }
        segments = classObj.specs;
        colors = Array(segments.length).fill(classObj.color);
    }

    let spinAngle = Math.random() * 360 + 1440; // random spin + multiple rotations
    let currentAngle = 0;
    let spinTime = 0;
    const spinTimeTotal = 3000 + Math.random() * 2000; // 3â€“5 seconds spin

    function rotate() {
        spinTime += 30;
        if (spinTime >= spinTimeTotal) {
            const segmentAngle = 360 / segments.length;
            const index = Math.floor(((360 - (currentAngle % 360)) % 360) / segmentAngle);
            const result = segments[index];
            if (wheelNumber === 1) {
                selectedDps = result;
                document.getElementById("result1").innerText = `Spin #1 Result: ${result}`;
            } else if (wheelNumber === 2) {
                selectedClass = result;
                document.getElementById("result2").innerText = `Spin #2 Result: ${result}`;
            } else {
                document.getElementById("result3").innerText = `Spin #3 Result: ${result}`;
            }
            return;
        }
        currentAngle += spinAngle / (spinTimeTotal / 30);
        const offset = (currentAngle * Math.PI / 180) % (2 * Math.PI);
        const segmentsRotated = [...segments.slice(), segments[0]];
        const colorsRotated = [...colors.slice(), colors[0]];
        ctx.save();
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.translate(radius, radius);
        ctx.rotate(offset);
        ctx.translate(-radius, -radius);
        drawWheel(canvas.id, segments, colors);
        ctx.restore();
        requestAnimationFrame(rotate);
    }
    rotate();
}

// Draw initial wheels
drawWheel("wheel1", dpsTypes, ["#FF5733", "#FF8D33", "#FFBD33"]);
drawWheel("wheel2", classes.map(c => c.name), classes.map(c => c.color));
drawWheel("wheel3", ["Spin DPS & Class first!"], ["#555"]);
</script>
</body>
</html>
