<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WoW DPS Spin-the-Wheel</title>
<style>
  body {
    background-color: #1e1e2f;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
  }
  canvas {
    margin: 20px auto;
    display: block;
    background-color: #2c2c44;
    border-radius: 50%;
    box-shadow: 0 0 10px #000;
  }
  button {
    margin: 10px;
    padding: 10px 25px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  #spin1 { background-color: #3498db; color: white; }
  #spin2 { background-color: #3498db; color: white; }
  #spin3 { background-color: #6c757d; color: white; }
  .result {
    font-size: 20px;
    margin-top: 20px;
    font-weight: bold;
  }
  .icon {
    width: 40px;
    height: 40px;
    vertical-align: middle;
    margin-left: 10px;
  }
</style>
</head>
<body>
<h1>WoW DPS Spin-the-Wheel</h1>
<canvas id="wheelCanvas" width="400" height="400"></canvas>

<div>
  <button id="spin1">Spin #1: DPS Type</button>
  <button id="spin2" disabled>Spin #2: Class</button>
  <button id="spin3" disabled>Spin #3: Spec</button>
</div>

<div class="result" id="resultText">Result: </div>

<script>
const canvas = document.getElementById('wheelCanvas');
const ctx = canvas.getContext('2d');
let currentStage = 1;
let currentAngle = 0;
let slices = [];
let selectedType = null;
let selectedClass = null;

const dpsTypes = ["Melee", "Ranged", "Caster"];
const classData = {
  Melee: [
    { name: "Warrior", icon: "icons/warrior.png" },
    { name: "Rogue", icon: "icons/rogue.png" },
    { name: "Death Knight", icon: "icons/deathknight.png" },
    { name: "Demon Hunter", icon: "icons/demonhunter.png" },
    { name: "Monk", icon: "icons/monk.png" }
  ],
  Ranged: [
    { name: "Hunter", icon: "icons/hunter.png" },
    { name: "Evoker", icon: "icons/evoker.png" }
  ],
  Caster: [
    { name: "Mage", icon: "icons/mage.png" },
    { name: "Warlock", icon: "icons/warlock.png" },
    { name: "Priest", icon: "icons/priest.png" },
    { name: "Shaman", icon: "icons/shaman.png" },
    { name: "Druid", icon: "icons/druid.png" }
  ]
};
const specs = {
  Hunter: ["Beast Mastery", "Marksmanship", "Survival"],
  Mage: ["Arcane", "Fire", "Frost"],
  Warlock: ["Affliction", "Demonology", "Destruction"],
  Priest: ["Shadow"],
  Shaman: ["Elemental", "Enhancement"],
  Druid: ["Balance", "Feral"],
  Warrior: ["Arms", "Fury"],
  Rogue: ["Assassination", "Outlaw", "Subtlety"],
  "Death Knight": ["Frost", "Unholy"],
  "Demon Hunter": ["Havoc"],
  Monk: ["Windwalker"],
  Evoker: ["Devastation", "Augmentation"]
};

function drawWheel() {
  const sliceAngle = 2 * Math.PI / slices.length;
  for (let i = 0; i < slices.length; i++) {
    const startAngle = i * sliceAngle;
    const endAngle = startAngle + sliceAngle;
    ctx.beginPath();
    ctx.moveTo(200, 200);
    ctx.arc(200, 200, 180, startAngle, endAngle);
    ctx.closePath();
    ctx.fillStyle = i % 2 === 0 ? "#6c5ce7" : "#00cec9";
    ctx.fill();
    ctx.save();
    ctx.translate(200, 200);
    ctx.rotate(startAngle + sliceAngle / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "white";
    ctx.font = "16px Arial";
    ctx.fillText(slices[i].name, 150, 10);
    if (slices[i].icon) {
      const img = new Image();
      img.src = slices[i].icon;
      img.onload = () => ctx.drawImage(img, 120, -20, 40, 40);
    }
    ctx.restore();
  }
}

function spinWheel() {
  const sliceAngle = 2 * Math.PI / slices.length;
  const randomIndex = Math.floor(Math.random() * slices.length);
  const targetAngle = randomIndex * sliceAngle + sliceAngle / 2;
  const spins = 5 + Math.floor(Math.random() * 3);
  const finalAngle = (2 * Math.PI * spins) - targetAngle;
  let step = 0;
  const spinInterval = setInterval(() => {
    step += 0.1;
    currentAngle += (finalAngle - currentAngle) * 0.1;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.save();
    ctx.translate(200, 200);
    ctx.rotate(currentAngle);
    ctx.translate(-200, -200);
    drawWheel();
    ctx.restore();
    if (step >= 1) {
      clearInterval(spinInterval);
      const result = slices[randomIndex].name;
      document.getElementById('resultText').textContent = `Result: ${result}`;
      if (currentStage === 1) {
        selectedType = result;
        document.getElementById('spin2').disabled = false;
      } else if (currentStage === 2) {
        selectedClass = result;
        document.getElementById('spin3').disabled = false;
      }
    }
  }, 30);
}

document.getElementById('spin1').addEventListener('click', () => {
  currentStage = 1;
  slices = dpsTypes.map(name => ({ name }));
  spinWheel();
});

document.getElementById('spin2').addEventListener('click', () => {
  if (!selectedType) return;
  currentStage = 2;
  slices = classData[selectedType];
  spinWheel();
});

document.getElementById('spin3').addEventListener('click', () => {
  if (!selectedClass) return;
  currentStage = 3;
  slices = specs[selectedClass].map(name => ({ name }));
  spinWheel();
});

drawWheel();
</script>
</body>
</html>
